{"version":3,"sources":["../../../../../src/components/ChipsInputBase/Chip/Chip.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { Icon16Cancel } from '@vkontakte/icons';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../../hooks/useAdaptivity';\nimport { useFocusVisible } from '../../../hooks/useFocusVisible';\nimport { useFocusVisibleClassName } from '../../../hooks/useFocusVisibleClassName';\nimport {\n  type HasComponent,\n  type HasDataAttribute,\n  type HTMLAttributesWithRootRef,\n} from '../../../types';\nimport { RootComponent } from '../../RootComponent/RootComponent';\nimport { Footnote } from '../../Typography/Footnote/Footnote';\nimport { VisuallyHidden } from '../../VisuallyHidden/VisuallyHidden';\nimport { type ChipOptionValue } from '../types';\nimport styles from './Chip.module.css';\n\nconst sizeYClassNames = {\n  none: styles.sizeYNone,\n  compact: styles.sizeYCompact,\n} as const;\n\nconst modeClassNames = {\n  primary: styles.modePrimary,\n  secondary: styles.modeSecondary,\n} as const;\n\nexport interface ChipProps\n  extends HasComponent,\n    HasDataAttribute,\n    HTMLAttributesWithRootRef<HTMLElement> {\n  /**\n   * Режим отображения компонента.\n   */\n  mode?: 'primary' | 'secondary';\n  /**\n   * Значение чипа.\n   */\n  value?: ChipOptionValue;\n  /**\n   * Можно ли удалить чип.\n   */\n  removable?: boolean;\n  /**\n   * Блокировка взаимодействия с чипом.\n   */\n  disabled?: boolean;\n  /**\n   * Режим только для чтения.\n   */\n  readOnly?: boolean;\n  /**\n   * Текст для кнопки удаления.\n   */\n  removeLabel?: string;\n  /**\n   * Контент перед основным содержимым.\n   */\n  before?: React.ReactNode;\n  /**\n   * Контент после основного содержимого.\n   */\n  after?: React.ReactNode;\n  /**\n   * Обработчик удаления чипа.\n   */\n  onRemove?: (event: React.MouseEvent, value: ChipOptionValue) => void;\n}\n\n/**\n * @see https://vkui.io/components/chip\n */\nexport const Chip = ({\n  mode = 'primary',\n  Component = 'span',\n  value = '',\n  removable = true,\n  onRemove,\n  removeLabel = 'Удалить',\n  before,\n  after,\n  disabled,\n  readOnly,\n  children,\n  className,\n  onFocus: onFocusProp,\n  onBlur: onBlurProp,\n  ...restProps\n}: ChipProps): React.ReactNode => {\n  const { sizeY = 'none' } = useAdaptivity();\n  const { focusVisible, onFocus, onBlur } = useFocusVisible();\n  const focusVisibleClassName = useFocusVisibleClassName({ focusVisible });\n\n  const handleFocus = (event: React.FocusEvent<HTMLInputElement>) => {\n    if (onFocusProp) {\n      onFocusProp(event);\n    }\n    onFocus(event);\n  };\n\n  const handleBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n    if (onBlurProp) {\n      onBlurProp(event);\n    }\n    onBlur(event);\n  };\n\n  const onRemoveWrapper = React.useCallback(\n    (event: React.MouseEvent) => {\n      onRemove?.(event, value);\n    },\n    [onRemove, value],\n  );\n\n  return (\n    <RootComponent\n      {...restProps}\n      Component={Component}\n      className={classNames(\n        styles.host,\n        sizeY !== 'regular' && sizeYClassNames[sizeY],\n        modeClassNames[mode],\n        focusVisibleClassName,\n        className,\n      )}\n      aria-readonly={readOnly}\n      aria-disabled={disabled}\n      onFocus={disabled ? undefined : handleFocus}\n      onBlur={disabled ? undefined : handleBlur}\n    >\n      <div className={styles.in}>\n        {hasReactNode(before) && <div className={styles.before}>{before}</div>}\n        <Footnote className={styles.content}>{children}</Footnote>\n        {hasReactNode(after) && <div className={styles.after}>{after}</div>}\n      </div>\n      {!readOnly && removable && (\n        <div className={styles.removable}>\n          <button\n            type=\"button\"\n            tabIndex={-1} // [reason]: чтобы можно было выставлять состояние фокуса только программно через `*.focus()`\n            disabled={disabled}\n            className={styles.remove}\n            onClick={disabled ? undefined : onRemoveWrapper}\n          >\n            <VisuallyHidden>\n              &nbsp; {removeLabel} {children}\n            </VisuallyHidden>\n            <Icon16Cancel />\n          </button>\n        </div>\n      )}\n    </RootComponent>\n  );\n};\n"],"names":["React","Icon16Cancel","classNames","hasReactNode","useAdaptivity","useFocusVisible","useFocusVisibleClassName","RootComponent","Footnote","VisuallyHidden","styles","sizeYClassNames","none","sizeYNone","compact","sizeYCompact","modeClassNames","primary","modePrimary","secondary","modeSecondary","Chip","mode","Component","value","removable","onRemove","removeLabel","before","after","disabled","readOnly","children","className","onFocus","onFocusProp","onBlur","onBlurProp","restProps","sizeY","focusVisible","focusVisibleClassName","handleFocus","event","handleBlur","onRemoveWrapper","useCallback","host","aria-readonly","aria-disabled","undefined","div","in","content","button","type","tabIndex","remove","onClick"],"mappings":"AAAA;;AAEA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,YAAY,QAAQ,mBAAmB;AAChD,SAASC,UAAU,EAAEC,YAAY,QAAQ,kBAAkB;AAC3D,SAASC,aAAa,QAAQ,kCAA+B;AAC7D,SAASC,eAAe,QAAQ,oCAAiC;AACjE,SAASC,wBAAwB,QAAQ,6CAA0C;AAMnF,SAASC,aAAa,QAAQ,uCAAoC;AAClE,SAASC,QAAQ,QAAQ,wCAAqC;AAC9D,SAASC,cAAc,QAAQ,yCAAsC;AAErE,OAAOC,YAAY,oBAAoB;AAEvC,MAAMC,kBAAkB;IACtBC,MAAMF,OAAOG,SAAS;IACtBC,SAASJ,OAAOK,YAAY;AAC9B;AAEA,MAAMC,iBAAiB;IACrBC,SAASP,OAAOQ,WAAW;IAC3BC,WAAWT,OAAOU,aAAa;AACjC;AA4CA;;CAEC,GACD,OAAO,MAAMC,OAAO,CAAC,EACnBC,OAAO,SAAS,EAChBC,YAAY,MAAM,EAClBC,QAAQ,EAAE,EACVC,YAAY,IAAI,EAChBC,QAAQ,EACRC,cAAc,SAAS,EACvBC,MAAM,EACNC,KAAK,EACLC,QAAQ,EACRC,QAAQ,EACRC,QAAQ,EACRC,SAAS,EACTC,SAASC,WAAW,EACpBC,QAAQC,UAAU,EAClB,GAAGC,WACO;IACV,MAAM,EAAEC,QAAQ,MAAM,EAAE,GAAGnC;IAC3B,MAAM,EAAEoC,YAAY,EAAEN,OAAO,EAAEE,MAAM,EAAE,GAAG/B;IAC1C,MAAMoC,wBAAwBnC,yBAAyB;QAAEkC;IAAa;IAEtE,MAAME,cAAc,CAACC;QACnB,IAAIR,aAAa;YACfA,YAAYQ;QACd;QACAT,QAAQS;IACV;IAEA,MAAMC,aAAa,CAACD;QAClB,IAAIN,YAAY;YACdA,WAAWM;QACb;QACAP,OAAOO;IACT;IAEA,MAAME,kBAAkB7C,MAAM8C,WAAW,CACvC,CAACH;QACCjB,WAAWiB,OAAOnB;IACpB,GACA;QAACE;QAAUF;KAAM;IAGnB,qBACE,MAACjB;QACE,GAAG+B,SAAS;QACbf,WAAWA;QACXU,WAAW/B,WACTQ,OAAOqC,IAAI,EACXR,UAAU,aAAa5B,eAAe,CAAC4B,MAAM,EAC7CvB,cAAc,CAACM,KAAK,EACpBmB,uBACAR;QAEFe,iBAAejB;QACfkB,iBAAenB;QACfI,SAASJ,WAAWoB,YAAYR;QAChCN,QAAQN,WAAWoB,YAAYN;;0BAE/B,MAACO;gBAAIlB,WAAWvB,OAAO0C,EAAE;;oBACtBjD,aAAayB,yBAAW,KAACuB;wBAAIlB,WAAWvB,OAAOkB,MAAM;kCAAGA;;kCACzD,KAACpB;wBAASyB,WAAWvB,OAAO2C,OAAO;kCAAGrB;;oBACrC7B,aAAa0B,wBAAU,KAACsB;wBAAIlB,WAAWvB,OAAOmB,KAAK;kCAAGA;;;;YAExD,CAACE,YAAYN,2BACZ,KAAC0B;gBAAIlB,WAAWvB,OAAOe,SAAS;0BAC9B,cAAA,MAAC6B;oBACCC,MAAK;oBACLC,UAAU,CAAC;oBACX1B,UAAUA;oBACVG,WAAWvB,OAAO+C,MAAM;oBACxBC,SAAS5B,WAAWoB,YAAYL;;sCAEhC,MAACpC;;gCAAe;gCACNkB;gCAAY;gCAAEK;;;sCAExB,KAAC/B;;;;;;AAMb,EAAE"}