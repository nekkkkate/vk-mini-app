{"version":3,"sources":["../../../../../src/components/CustomSelect/hooks/useAfterItems.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { useStableCallback } from '../../../hooks/useStableCallback';\nimport { DropdownIcon } from '../../DropdownIcon/DropdownIcon';\nimport { type NativeSelectValue, NOT_SELECTED } from '../../NativeSelect/NativeSelect';\nimport { type SelectProps } from '../CustomSelect';\nimport { CustomSelectClearButton } from '../CustomSelectClearButton';\nimport styles from '../CustomSelect.module.css';\n\n/* eslint-disable jsdoc/require-jsdoc */\ninterface UseAfterItemsProps\n  extends Pick<\n    SelectProps,\n    | 'value'\n    | 'allowClearButton'\n    | 'icon'\n    | 'readOnly'\n    | 'disabled'\n    | 'ClearButton'\n    | 'clearButtonTestId'\n  > {\n  isControlledOutside: boolean;\n  nativeSelectValue: NativeSelectValue;\n  opened: boolean;\n  onClearButtonClick: () => void;\n}\n/* eslint-enable jsdoc/require-jsdoc */\n\nexport function useAfterItems({\n  value,\n  nativeSelectValue,\n  isControlledOutside,\n  opened,\n  allowClearButton,\n  ClearButton = CustomSelectClearButton,\n  onClearButtonClick,\n  clearButtonTestId,\n  disabled,\n  readOnly,\n  icon: iconProp,\n}: UseAfterItemsProps) {\n  const onClearButtonClickCb = useStableCallback(onClearButtonClick);\n\n  const controlledValueSet = isControlledOutside && value !== NOT_SELECTED.CUSTOM;\n  const uncontrolledValueSet = !isControlledOutside && nativeSelectValue !== NOT_SELECTED.NATIVE;\n  const clearButtonShown =\n    allowClearButton && !opened && (controlledValueSet || uncontrolledValueSet);\n\n  const clearButton = React.useMemo(() => {\n    if (!clearButtonShown) {\n      return null;\n    }\n\n    return (\n      <ClearButton\n        className={iconProp === undefined ? styles.clearIcon : undefined}\n        onClick={onClearButtonClickCb}\n        disabled={disabled}\n        data-testid={clearButtonTestId}\n      />\n    );\n  }, [clearButtonShown, ClearButton, iconProp, onClearButtonClickCb, disabled, clearButtonTestId]);\n\n  const icon = React.useMemo(() => {\n    if (iconProp !== undefined) {\n      return iconProp;\n    }\n\n    return (\n      <DropdownIcon\n        className={clearButtonShown ? styles.dropdownIcon : undefined}\n        opened={opened}\n      />\n    );\n  }, [clearButtonShown, iconProp, opened]);\n\n  return React.useMemo(\n    () =>\n      !readOnly &&\n      (icon || clearButtonShown) && (\n        <React.Fragment>\n          {clearButton}\n          {icon}\n        </React.Fragment>\n      ),\n    [clearButton, clearButtonShown, icon, readOnly],\n  );\n}\n"],"names":["React","useStableCallback","DropdownIcon","NOT_SELECTED","CustomSelectClearButton","styles","useAfterItems","value","nativeSelectValue","isControlledOutside","opened","allowClearButton","ClearButton","onClearButtonClick","clearButtonTestId","disabled","readOnly","icon","iconProp","onClearButtonClickCb","controlledValueSet","CUSTOM","uncontrolledValueSet","NATIVE","clearButtonShown","clearButton","useMemo","className","undefined","clearIcon","onClick","data-testid","dropdownIcon","Fragment"],"mappings":"AAAA;;AAEA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,iBAAiB,QAAQ,sCAAmC;AACrE,SAASC,YAAY,QAAQ,qCAAkC;AAC/D,SAAiCC,YAAY,QAAQ,qCAAkC;AAEvF,SAASC,uBAAuB,QAAQ,gCAA6B;AACrE,OAAOC,YAAY,6BAA6B;AAmBhD,qCAAqC,GAErC,OAAO,SAASC,cAAc,EAC5BC,KAAK,EACLC,iBAAiB,EACjBC,mBAAmB,EACnBC,MAAM,EACNC,gBAAgB,EAChBC,cAAcR,uBAAuB,EACrCS,kBAAkB,EAClBC,iBAAiB,EACjBC,QAAQ,EACRC,QAAQ,EACRC,MAAMC,QAAQ,EACK;IACnB,MAAMC,uBAAuBlB,kBAAkBY;IAE/C,MAAMO,qBAAqBX,uBAAuBF,UAAUJ,aAAakB,MAAM;IAC/E,MAAMC,uBAAuB,CAACb,uBAAuBD,sBAAsBL,aAAaoB,MAAM;IAC9F,MAAMC,mBACJb,oBAAoB,CAACD,UAAWU,CAAAA,sBAAsBE,oBAAmB;IAE3E,MAAMG,cAAczB,MAAM0B,OAAO,CAAC;QAChC,IAAI,CAACF,kBAAkB;YACrB,OAAO;QACT;QAEA,qBACE,KAACZ;YACCe,WAAWT,aAAaU,YAAYvB,OAAOwB,SAAS,GAAGD;YACvDE,SAASX;YACTJ,UAAUA;YACVgB,eAAajB;;IAGnB,GAAG;QAACU;QAAkBZ;QAAaM;QAAUC;QAAsBJ;QAAUD;KAAkB;IAE/F,MAAMG,OAAOjB,MAAM0B,OAAO,CAAC;QACzB,IAAIR,aAAaU,WAAW;YAC1B,OAAOV;QACT;QAEA,qBACE,KAAChB;YACCyB,WAAWH,mBAAmBnB,OAAO2B,YAAY,GAAGJ;YACpDlB,QAAQA;;IAGd,GAAG;QAACc;QAAkBN;QAAUR;KAAO;IAEvC,OAAOV,MAAM0B,OAAO,CAClB,IACE,CAACV,YACAC,CAAAA,QAAQO,gBAAe,mBACtB,MAACxB,MAAMiC,QAAQ;;gBACZR;gBACAR;;YAGP;QAACQ;QAAaD;QAAkBP;QAAMD;KAAS;AAEnD"}